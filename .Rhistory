ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
labs(x = 'Prevalence',
color = 'Pool Size')+
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)), scales = 'free')) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
labs(x = 'Prevalence',
color = 'Pool Size')+
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
labs(x = 'Prevalence',
color = 'Pool Size')+
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))+
scale_y_log10()) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
scale_y_log10() +
labs(x = 'Prevalence',
color = 'Pool Size') +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
coord_cartesian(ylim = c(1,NA)) +
scale_y_log10() +
labs(x = 'Prevalence',
color = 'Pool Size') +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
coord_cartesian(ylim = c(1,NA)) +
#scale_y_log10() +
labs(x = 'Prevalence',
color = 'Pool Size') +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
de.data.corr %>%
group_by(form) %>%
group_map(~{
de.fig.corr <- .x %>%
mutate(s =  as.factor(s),
correlation = ifelse(correlation == 0,
"0 (known)" ,
as.character(correlation))) %>%
ggplot(aes(x = theta, y = de, color = s)) +
geom_line() +
geom_hline(yintercept = 1,linetype = 2) +
coord_cartesian(ylim = c(0,NA),xlim = c(0,NA)) +
#scale_y_log10() +
scale_x_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = rho == .(correlation), cols = N %*% s == .(catch)), scales = 'free') +
labs(x = bquote(theta),
y = 'Design Effect') +
theme(text = element_text(size = 12),
legend.position = 'bottom')
de.fig.corr %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
de.fig.corr$data <- de.fig.corr$data %>% subset(catch %in% c(16,64) & correlation != '0.01')
(de.fig.corr +
coord_cartesian(ylim = c(1,NA)) +
scale_y_log10() +
labs(x = 'Prevalence',
color = 'Pool Size') +
facet_grid(cols = vars(catch), rows = vars(correlation),
labeller = label_bquote(rows = ICC == .(correlation), cols = Catch == .(catch)))) %>%
ggsave(paste0('./Figures/FigDesignEffectCorr',.y,'Simple.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
})
optimal_cluster_sN_simple <- optimal_cluster_sN
optimal_cluster_sN_simple$data <- optimal_cluster_sN$data  %>%
subset(cost.pool == 4 & correlation !='NA (simple random survey)') %>%
mutate(outcome = recode(outcome,
`Optimal s` = 'Optimal\nPool Size',
`Optimal N` = 'Optimal\nPool Number',
`Optimal sN` = 'Optimal\nCatch'))
optimal_cluster_sN_simple <- optimal_cluster_sN_simple +
labs(x = 'Prevalence',
color = 'ICC')
ggsave('./Figures/optimal cluster sN simple.png',optimal_cluster_sN_simple, width = 6.5, height = 4.5, unit = 'in')
optimal_cluster_sN_simple <- optimal_cluster_sN
optimal_cluster_sN_simple$data <- optimal_cluster_sN$data  %>%
subset(cost.pool == 4 &
correlation !='NA (simple random survey)'&
correlation != '0.01') %>%
mutate(outcome = recode(outcome,
`Optimal s` = 'Optimal\nPool Size',
`Optimal N` = 'Optimal\nPool Number',
`Optimal sN` = 'Optimal\nCatch'))
optimal_cluster_sN_simple <- optimal_cluster_sN_simple +
labs(x = 'Prevalence',
color = 'ICC')
ggsave('./Figures/optimal cluster sN simple.png',
optimal_cluster_sN_simple, width = 6.5, height = 4.5, unit = 'in')
optimal_cluster_sN_simple <- optimal_cluster_sN
optimal_cluster_sN_simple$data <- optimal_cluster_sN$data  %>%
subset(cost.pool == 4 &
correlation !='NA (simple random survey)'&
correlation != '0.01') %>%
mutate(outcome = recode(outcome,
`Optimal s` = 'Optimal\nPool Size',
`Optimal N` = 'Optimal\nPool Number',
`Optimal sN` = 'Optimal\nCatch'))
optimal_cluster_sN_simple <- optimal_cluster_sN_simple +
labs(x = 'Prevalence',
color = 'ICC')+
facet_grid(outcome ~ cost.pool + cost.location, scales = 'free',
labeller = label_bquote(rows = .(outcome),
cols = c[u] * {phantom() == phantom()} * 1 * ';' *
c[t] * {phantom() == phantom()} * .(cost.pool) * ';' *
c[s] * {phantom() == phantom()} * .(cost.location)),
switch = 'y'
)
ggsave('./Figures/optimal cluster sN simple.png',
optimal_cluster_sN_simple, width = 6.5, height = 4.5, unit = 'in')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.1,0.005,0.1,0.005),
estmax = c(0.1,0.005,0.1,0.005) * c(1.3,1.3,1.6,1.6),
estmin = c(0.1,0.005,0.1,0.005) * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_crossbar()
help("geom_crossbar")
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.1,0.005,0.1,0.005),
estmax = c(0.1,0.005,0.1,0.005) * c(1.3,1.3,1.6,1.6),
estmin = c(0.1,0.005,0.1,0.005) * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange()
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange()
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange() +
scale_y_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1)) +
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange() +
scale_y_continuous(breaks = seq(0,0.1, 0.02), labels = scales::percent_format(1))
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5)) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1))
scale_y_continuous(labels = scales::percent_format(1))
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1))
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.3,1.3,1.6,1.6),
estmin = est * c(0.7,0.7,0.5,0.5),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,1.6),
estmin = est * c(0.8,0.7,0.7,0.5),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.5),
estmin = est * c(0.8,0.7,0.7,0.5),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.5),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.2),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence')
data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.2),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))
(data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.2),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))) %>%
ggsave(paste0('./WhyAdjust.png'),.,
width = 6.5, height = 5, unit = 'in',dpi = 'retina')
(data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.2),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))) %>%
ggsave(paste0('./WhyAdjust.png'),.,
width = 4, height = 4, unit = 'in',dpi = 'retina')
(data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.005,0.02,0.005)) %>%
mutate(estmax = est * c(1.2,1.3,1.4,2.2),
estmin = est * c(0.8,0.7,0.7,0.25),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))) %>%
ggsave(paste0('./WhyAdjust.png'),.,
width = 8, height = 4, unit = 'in',dpi = 'retina')
(data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.02,0.008,0.02,0.008)) %>%
mutate(estmax = est * c(1.2,1.2,1.4,1.4),
estmin = est * c(0.8,0.8,0.7,0.6),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_continuous(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))) %>%
ggsave(paste0('./WhyAdjust.png'),.,
width = 8, height = 4, unit = 'in',dpi = 'retina')
(data.frame(kind = c('Crude','Pool adjusted', 'Cluster adjusted', 'Pool and cluster adjusted'),
est = c(0.2,0.008,0.2,0.008)) %>%
mutate(estmax = est * c(1.2,1.2,1.4,1.4),
estmin = est * c(0.8,0.8,0.7,0.6),
kind = factor(kind,
levels = c('Crude','Pool adjusted',
'Cluster adjusted',
'Pool and cluster adjusted'))) %>%
ggplot(aes(x = kind, y = est, ymax = estmax, ymin = estmin)) +
geom_point()+
geom_hline(yintercept = 0.01)+
geom_linerange() +
scale_y_log10(labels = scales::percent_format(1)) +
labs(x = '', y = 'Prevalence') +
theme(text = element_text(size = 12))) %>%
ggsave(paste0('./WhyAdjust.png'),.,
width = 8, height = 4, unit = 'in',dpi = 'retina')
min(c(0))
min(c())
